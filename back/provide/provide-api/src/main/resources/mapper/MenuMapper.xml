<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.gomains.soriys.provide.api.dao.MenuMapper">

    <resultMap id="BaseResultMap" type="cn.gomains.soriys.provide.api.entity.Menu" >
        <result column="parentId" property="parentId" />
        <result column="name" property="name" />
        <result column="component" property="component" />
        <result column="path" property="path" />
        <result column="remark" property="remark" />
        <result column="order" property="order" />
        <result column="status" property="status" />
        <result column="hideMenu" property="hideMenu" />
        <result column="title" property="title" />
        <result column="icon" property="icon" />
        <result column="classfy" property="classfy" />
        <result column="type" property="type" />
    </resultMap>

    <sql id="Base_Column_List">
        parentid,
                name,
                component,
                path,
                remark,
                'order',
                status,
                hidemenu,
                title,
                icon,
                classfy,
                type
    </sql>

    <insert id="insert" useGeneratedKeys="true" keyColumn="id" keyProperty="id" parameterType="cn.gomains.soriys.provide.api.entity.Menu">
        INSERT INTO sys.menu
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="null != parentId ">
                parentid,
            </if>
            <if test="null != name and '' != name">
                name,
            </if>
            <if test="null != component and '' != component">
                component,
            </if>
            <if test="null != path and '' != path">
                path,
            </if>
            <if test="null != remark and '' != remark">
                remark,
            </if>
            <if test="null != order ">
                'order',
            </if>
            <if test="null != status ">
                status,
            </if>
            <if test="null != hideMenu and '' != hideMenu">
                hidemenu,
            </if>
            <if test="null != title and '' != title">
                title,
            </if>
            <if test="null != icon and '' != icon">
                icon,
            </if>
            <if test="null != classfy and '' != classfy">
                classfy,
            </if>
            <if test="null != type ">
                type
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="null != parentId ">
                #{parentid},
            </if>
            <if test="null != name and '' != name">
                #{name},
            </if>
            <if test="null != component and '' != component">
                #{component},
            </if>
            <if test="null != path and '' != path">
                #{path},
            </if>
            <if test="null != remark and '' != remark">
                #{remark},
            </if>
            <if test="null != order ">
                #{order},
            </if>
            <if test="null != status ">
                #{status},
            </if>
            <if test="null != hidemenu and '' != hidemenu">
                #{hidemenu},
            </if>
            <if test="null != title and '' != title">
                #{title},
            </if>
            <if test="null != icon and '' != icon">
                #{icon},
            </if>
            <if test="null != classfy and '' != classfy">
                #{classfy},
            </if>
            <if test="null != type ">
                #{type}
            </if>
        </trim>
    </insert>

    <delete id="delete" >
        DELETE FROM sys.menu
        WHERE menuid = #{menuId}
    </delete>

    <update id="update" parameterType="cn.gomains.soriys.provide.api.entity.Menu">
        UPDATE sys.menu
        <set>
            <if test="null != parentId ">parentid = #{parentId},</if>
            <if test="null != name and '' != name">name = #{name},</if>
            <if test="null != component and '' != component">component = #{component},</if>
            <if test="null != path and '' != path">path = #{path},</if>
            <if test="null != remark and '' != remark">remark = #{remark},</if>
            <if test="null != order ">'order' = #{order},</if>
            <if test="null != status ">status = #{status},</if>
            <if test="null != hideMenu and '' != hideMenu">hidemenu = #{hideMenu},</if>
            <if test="null != title and '' != title">title = #{title},</if>
            <if test="null != icon and '' != icon">icon = #{icon},</if>
            <if test="null != classfy and '' != classfy">classfy = #{classfy},</if>
            <if test="null != type ">type = #{type}</if>
        </set>
        WHERE id = #{id}
    </update>


    <select id="get" resultMap="BaseResultMap">
        SELECT <include refid="Base_Column_List" />
        FROM sys.menu
        WHERE menuid = #{id}
    </select>

    <select id="pageList" resultMap="BaseResultMap">
        SELECT <include refid="Base_Column_List" />
        FROM sys.menu
        LIMIT #{pageSize} OFFSET ((#{page}-1) * #{pageSize})
    </select>

    <select id="pageListCount" resultType="java.lang.Integer">
        SELECT count(1)
        FROM sys.menu
    </select>

</mapper>