import{T as A,g as B,d as S}from"./table.c1136bd1.js";import{_ as F,d as R,R as E,T,D as w,h as V,u as L,i as k,j as y,P as M,S as q,A as z,r as l,B as P,o as $,c as j,a as b,b as a,w as n,e as h,C as G,m as I,t as U,E as H}from"./index.8250fede.js";const J=R({name:"crudTable",components:{Table:A,RefreshLeft:E,Tools:T,Download:w},setup(){V();const e=L(),o=k({input:""}),s=k({index:1,size:20,total:0}),g=y(!0),d=y([]),_=y([]),u=r=>{_.value=r},c=r=>{g.value=!0,r&&(s.index=1);let m={page:s.index,pageSize:s.size,...o};B(m).then(t=>{let f=t.data.list;Array.isArray(f)&&f.forEach(C=>{}),d.value=t.data.list,s.total=Number(t.data.pager.total)}).catch(t=>{d.value=[],s.index=1,s.total=0}).finally(()=>{g.value=!1})},v=r=>{let m={ids:r.map(t=>t.id).join(",")};S(m).then(t=>{H({type:"success",message:"\u5220\u9664\u6210\u529F"}),c(d.value.length===1)})},D=()=>{e.push({name:"bookManageAdd"})},p=r=>{};return c(!0),{Plus:M,Search:q,Delete:z,RefreshLeft:E,Download:w,Tools:T,query:o,tableData:d,chooseData:_,loading:g,page:s,handleSelectionChange:u,handleAdd:D,handleEdit:p,handleDel:v,getTableData:c}}}),K={class:"layout-container"},O={class:"layout-container-form flex space-between"},Q={class:"layout-container-form-handle"},W={class:"layout-container-form-search flex center"},X={class:"layout-container-table"};function Y(e,o,s,g,d,_){const u=l("el-button"),c=l("el-popconfirm"),v=l("el-input"),D=l("RefreshLeft"),p=l("el-icon"),r=l("Tools"),m=l("Download"),t=l("el-table-column"),f=l("Table"),C=P("loading");return $(),j("div",K,[b("div",O,[b("div",Q,[a(u,{type:"primary",icon:e.Plus,onClick:e.handleAdd},{default:n(()=>[...o[4]||(o[4]=[h("\u5FEB\u901F\u9884\u7EA6",-1)])]),_:1},8,["icon","onClick"]),a(c,{title:e.$t("message.common.delTip"),onConfirm:o[0]||(o[0]=i=>e.handleDel(e.chooseData))},{reference:n(()=>[a(u,{type:"danger",icon:e.Delete,disabled:e.chooseData.length===0},{default:n(()=>[...o[5]||(o[5]=[h("\u4F5C\u5E9F",-1)])]),_:1},8,["icon","disabled"])]),_:1},8,["title"])]),b("div",W,[a(v,{modelValue:e.query.input,"onUpdate:modelValue":o[1]||(o[1]=i=>e.query.input=i),placeholder:e.$t("message.common.searchTip"),onChange:o[2]||(o[2]=i=>e.getTableData(!0))},null,8,["modelValue","placeholder"]),a(p,{class:"layout-container-form-icon"},{default:n(()=>[a(D)]),_:1}),a(p,{class:"layout-container-form-icon"},{default:n(()=>[a(r)]),_:1}),a(p,{class:"layout-container-form-icon"},{default:n(()=>[a(m)]),_:1})])]),b("div",X,[G(($(),I(f,{ref:"table",page:e.page,"onUpdate:page":o[3]||(o[3]=i=>e.page=i),showIndex:!0,showSelection:!0,data:e.tableData,onGetTableData:e.getTableData,onSelectionChange:e.handleSelectionChange},{default:n(()=>[a(t,{prop:"name",label:"\u59D3\u540D",align:"center"}),a(t,{prop:"radioName",label:"\u6027\u522B",align:"center"}),a(t,{prop:"radioName",label:"\u5E74\u9F84",align:"center"}),a(t,{prop:"radioName",label:"\u624B\u673A\u53F7",align:"center"}),a(t,{prop:"radioName",label:"\u6237\u53E3\u6240\u5728\u5730",align:"center"}),a(t,{prop:"radioName",label:"\u9884\u7EA6\u72B6\u6001",align:"center"}),a(t,{prop:"radioName",label:"\u9884\u7EA6\u65E5\u671F",align:"center"}),a(t,{prop:"radioName",label:"\u5907\u6CE8",align:"center"}),a(t,{label:e.$t("message.common.handle"),align:"center",fixed:"right",width:"200"},{default:n(i=>[a(u,{onClick:N=>e.handleEdit(i.row)},{default:n(()=>[...o[6]||(o[6]=[h("\u67E5\u770B",-1)])]),_:1},8,["onClick"]),a(u,{type:"warning",onClick:N=>e.handleEdit(i.row)},{default:n(()=>[h(U(e.$t("message.common.update")),1)]),_:1},8,["onClick"])]),_:1},8,["label"])]),_:1},8,["page","data","onGetTableData","onSelectionChange"])),[[C,e.loading]])])])}var ee=F(J,[["render",Y],["__scopeId","data-v-4a04ccf7"]]);export{ee as default};
